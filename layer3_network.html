<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OSI Layer 3: Network Layer</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 30px;
            backdrop-filter: blur(10px);
        }
        
        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.8em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .layer-header {
            background: linear-gradient(135deg, #3498db, #2980b9);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin: 30px 0;
        }
        
        .content-box {
            background: rgba(0, 0, 0, 0.3);
            padding: 25px;
            border-radius: 15px;
            border-left: 4px solid #3498db;
        }
        
        .protocols-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .protocol-card {
            background: rgba(52, 152, 219, 0.3);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .wireshark-example {
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            padding: 12px;
            margin: 12px 0;
            font-family: 'Courier New', monospace;
            color: #00ff00;
            font-size: 0.9em;
        }
        
        .example-box {
            background: rgba(41, 128, 185, 0.3);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #3498db;
        }
        
        .back-button {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            margin-bottom: 20px;
        }
        
        .back-button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        
        .highlight {
            color: #f1c40f;
            font-weight: bold;
        }
        
        .demo-section {
            background: rgba(142, 68, 173, 0.3);
            padding: 25px;
            border-radius: 15px;
            margin: 30px 0;
        }
        
        .routing-demo {
            background: rgba(46, 204, 113, 0.3);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #2ecc71;
        }
        
        .packet-header {
            background: rgba(0, 0, 0, 0.4);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-family: monospace;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
        }
        
        .header-field {
            background: rgba(52, 152, 219, 0.4);
            padding: 8px;
            border-radius: 4px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: rgba(0, 0, 0, 0.2);
        }
        
        th, td {
            padding: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            text-align: left;
        }
        
        th {
            background: rgba(52, 152, 219, 0.6);
            font-weight: bold;
        }
        
        .subnet-calculator {
            background: rgba(230, 126, 34, 0.3);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #e67e22;
        }
        
        /* Interactive Demo Styles */
        .layer3-explanation {
            background: rgba(52, 152, 219, 0.3);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .demo-area {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 20px 0;
            min-height: 400px;
        }
        
        .source-host, .dest-host {
            width: 200px;
            height: 250px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .source-host {
            background: rgba(52, 152, 219, 0.3);
        }
        
        .dest-host {
            background: rgba(46, 204, 113, 0.3);
        }
        
        .device-icon {
            font-size: 4em;
            margin-bottom: 15px;
        }
        
        .routing-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        
        .network-path {
            width: 300px;
            height: 4px;
            background: #ecf0f1;
            border-radius: 2px;
            position: relative;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .ip-packet {
            width: 60px;
            height: 30px;
            background: #3498db;
            border-radius: 3px;
            position: absolute;
            top: -13px;
            left: -60px;
            transition: all 2s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.6em;
            color: white;
        }
        
        .ip-packet.moving {
            left: 300px;
        }
        
        .routing-info {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            min-height: 140px;
            width: 300px;
            text-align: center;
        }
        
        .phase-indicator {
            display: flex;
            justify-content: center;
            margin: 20px 0;
        }
        
        .phase {
            width: 120px;
            height: 40px;
            background: rgba(255, 255, 255, 0.2);
            margin: 0 5px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .phase.active {
            background: rgba(46, 204, 113, 0.5);
            transform: scale(1.1);
        }
        
        .controls {
            text-align: center;
            margin: 20px 0;
        }
        
        .step-controls {
            display: flex;
            justify-content: center;
            margin-top: 15px;
        }
        
        .btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
            padding: 12px 24px;
            margin: 0 10px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
        }
        
        .btn:hover:not(:disabled) {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .protocol-selector {
            margin: 20px 0;
            text-align: center;
        }
        
        select {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
            padding: 10px 15px;
            border-radius: 5px;
            font-size: 16px;
            backdrop-filter: blur(5px);
        }
        
        select option {
            background: #2980b9;
            color: white;
        }
        
        .status {
            text-align: center;
            font-size: 1.2em;
            margin: 20px 0;
            padding: 10px;
            border-radius: 5px;
            font-weight: bold;
        }
        
        .status.routing {
            background: rgba(241, 196, 15, 0.3);
        }
        
        .status.forwarding {
            background: rgba(46, 204, 113, 0.3);
        }
        
        .status.idle {
            background: rgba(149, 165, 166, 0.3);
        }
        
        .wireshark-packet {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            padding: 16px 20px;
            margin: 12px 0;
            font-family: 'Courier New', monospace;
            font-size: 1.15em;
            color: #00ff00;
            white-space: pre-wrap;
            word-wrap: break-word;
            overflow-wrap: break-word;
            line-height: 1.6;
            min-height: 120px;
            max-height: 400px;
            overflow-x: auto;
            overflow-y: auto;
            width: 100%;
            box-sizing: border-box;
        }
        
        .packet-explanation {
            background: rgba(41, 128, 185, 0.3);
            padding: 10px;
            border-radius: 5px;
            margin: 5px 0;
            font-size: 0.9em;
            border-left: 4px solid #3498db;
        }
        
        .step-counter {
            background: rgba(0, 0, 0, 0.3);
            padding: 5px 15px;
            border-radius: 15px;
            margin: 10px 0;
            font-weight: bold;
        }
        
        .network-characteristics {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
            margin: 20px 0;
        }
        
        .characteristic {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            margin: 5px;
            border-radius: 10px;
            width: calc(50% - 30px);
            box-sizing: border-box;
        }
        
        .protocol-info {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .ip-address {
            font-family: 'Courier New', monospace;
            background: rgba(0, 0, 0, 0.3);
            padding: 3px 6px;
            border-radius: 3px;
            color: #f1c40f;
        }
        
        /* Dark Mode Toggle */
        .dark-mode-toggle{position:fixed;top:20px;right:20px;z-index:1000;background:rgba(255,255,255,0.2);border:2px solid rgba(255,255,255,0.3);border-radius:25px;padding:10px 20px;cursor:pointer;backdrop-filter:blur(10px);transition:all 0.3s ease;display:flex;align-items:center;gap:8px;font-size:16px;color:white;}
        .dark-mode-toggle:hover{background:rgba(255,255,255,0.3);transform:translateY(-2px);}
        body.dark-mode{background:linear-gradient(135deg,#1a1a1a 0%,#2d2d2d 100%);}
        body.dark-mode .container{background:rgba(0,0,0,0.4);}
        body.dark-mode .layer3-explanation,body.dark-mode .content-box,body.dark-mode .protocol-info,body.dark-mode .example-box{background:rgba(0,0,0,0.5);}
    </style>
</head>
<body>
    <button class="dark-mode-toggle" onclick="toggleDarkMode()" title="Toggle Dark Mode"><span id="darkModeIcon">üåô</span><span id="darkModeText">Dark Mode</span></button>
    <div class="container">
        <a href="index.html" class="back-button">‚Üê Back to OSI Overview</a>
        
        <h1>üó∫Ô∏è Layer 3: Network Layer</h1>
        
        <div class="layer-header">
            <h2>Routing & Logical Addressing</h2>
            <p>The Network Layer provides logical addressing and routing services to deliver packets from source to destination across multiple networks. It handles path determination and packet forwarding between different network segments.</p>
        </div>
        
        <!-- Interactive Demo Section -->
        <div class="layer3-explanation">
            <h2>Layer 3 (Network) Technologies</h2>
            <p>
                The <span class="highlight">Network Layer</span> is responsible for end-to-end packet delivery across multiple networks. 
                It provides <span class="highlight">logical addressing (IP), routing, path determination, and packet forwarding</span> 
                between different network segments.
            </p>
            
            <div class="network-characteristics">
                <div class="characteristic">
                    <strong>Logical Addressing</strong> - IP addresses that work globally across different physical networks
                </div>
                <div class="characteristic">
                    <strong>Routing & Path Selection</strong> - Finding the best path through multiple routers to reach destination
                </div>
                <div class="characteristic">
                    <strong>Packet Forwarding</strong> - Moving packets hop-by-hop from source to destination network
                </div>
                <div class="characteristic">
                    <strong>Network Internetworking</strong> - Connecting different types of networks (Ethernet, Wi-Fi, etc.)
                </div>
            </div>
            
            <p>
                <strong>The Critical Role:</strong> While Layer 2 handles local delivery using MAC addresses, Layer 3 enables 
                <span class="highlight">global internet communication</span> using IP addresses and routing protocols.
            </p>
        </div>
        
        <div class="protocol-selector">
            <label for="protocolSelect">Choose Network Protocol: </label>
            <select id="protocolSelect">
                <option value="ipv4">IPv4 Routing</option>
                <option value="icmp">ICMP Ping</option>
                <option value="ospf">OSPF Routing Protocol</option>
                <option value="bgp">BGP Internet Routing</option>
            </select>
        </div>
        
        <div class="demo-area">
            <div class="source-host">
                <div class="device-icon">üñ•Ô∏è</div>
                <h3>Source Host</h3>
                <div class="ip-address" id="sourceIP">192.168.1.100</div>
                <div id="sourceStatus">Ready</div>
            </div>
            
            <div class="routing-area">
                <div class="phase-indicator">
                    <div class="phase" id="phase1">Route Lookup</div>
                    <div class="phase" id="phase2">Forward</div>
                    <div class="phase" id="phase3">Deliver</div>
                </div>
                
                <div class="network-path">
                    <div class="ip-packet" id="packet1">IP</div>
                    <div class="ip-packet" id="packet2">IP</div>
                </div>
                
                <div class="routing-info" id="routingInfo">
                    <strong>Routing Status:</strong>
                    <div id="statusText">Select a protocol and mode to begin</div>
                    <div id="stepCounter" class="step-counter">Step 0 of 0</div>
                    <div id="wiresharkExample" class="wireshark-packet" style="display:none;"></div>
                    <div id="packetExplanation" class="packet-explanation" style="display:none;"></div>
                </div>
                
                <div class="status idle" id="overallStatus">Network Idle</div>
            </div>
            
            <div class="dest-host">
                <div class="device-icon">üåê</div>
                <h3>Destination</h3>
                <div class="ip-address" id="destIP">8.8.8.8</div>
                <div id="destStatus">Listening</div>
            </div>
        </div>
        
        <div class="controls">
            <button class="btn" id="startDemo" onclick="startDemo()">üöÄ Auto Demo</button>
            <button class="btn" id="manualDemo" onclick="startManualDemo()">üëã Manual Demo</button>
            <button class="btn" onclick="resetDemo()">üîÑ Reset</button>
            
            <div class="step-controls">
                <button class="btn" id="prevStepBtn" onclick="prevStep()" disabled>‚Üê Previous Step</button>
                <button class="btn" id="nextStepBtn" onclick="nextStep()" disabled>Next Step ‚Üí</button>
            </div>
        </div>
        
        <div class="protocol-info" id="protocolDetails">
            <h3>Network Protocol Information</h3>
            <div id="protocolDescription">Select a protocol and click "Protocol Details" to learn more.</div>
            <div id="layer3Evidence" style="margin-top: 15px;"></div>
        </div>
        
        <!-- End Interactive Demo Section -->
        
        <div class="content-grid">
            <div class="content-box">
                <h3>üéØ Primary Functions</h3>
                <ul>
                    <li><strong>Logical Addressing:</strong> IP addresses for global device identification</li>
                    <li><strong>Routing:</strong> Finding best paths between networks</li>
                    <li><strong>Packet Forwarding:</strong> Moving packets toward their destination</li>
                    <li><strong>Path Determination:</strong> Calculating optimal routes</li>
                    <li><strong>Fragmentation:</strong> Breaking packets into smaller pieces when needed</li>
                </ul>
            </div>
            
            <div class="content-box">
                <h3>üîß Key Characteristics</h3>
                <ul>
                    <li><span class="highlight">IP Addresses:</span> 32-bit (IPv4) or 128-bit (IPv6) logical addresses</li>
                    <li><span class="highlight">Routing Tables:</span> Databases of network paths</li>
                    <li><span class="highlight">Subnet Masks:</span> Define network and host portions</li>
                    <li><span class="highlight">TTL/Hop Limit:</span> Prevent infinite packet loops</li>
                    <li><span class="highlight">ICMP:</span> Error reporting and network diagnostics</li>
                </ul>
            </div>
        </div>
        
        <div class="content-box">
            <h3>üåê Network Layer Protocols</h3>
            <div class="protocols-list">
                <div class="protocol-card">
                    <h4>üåç IPv4 (Internet Protocol v4)</h4>
                    <p><strong>Primary Internet Protocol</strong></p>
                    <div class="wireshark-example">Internet Protocol Version 4
    Version: 4, Header Length: 20 bytes
    Src: 192.168.1.100 (192.168.1.100)
    Dst: 8.8.8.8 (8.8.8.8)
    TTL: 64, Protocol: TCP (6)</div>
                    <p><strong>What you see in Wireshark:</strong> Source/destination IP addresses, TTL, protocol type</p>
                    <small><em>Every packet on the internet uses IP addressing</em></small>
                </div>
                
                <div class="protocol-card">
                    <h4>üîÆ IPv6 (Internet Protocol v6)</h4>
                    <p><strong>Next Generation Internet Protocol</strong></p>
                    <div class="wireshark-example">Internet Protocol Version 6
    Version: 6, Traffic Class: 0, Flow Label: 0
    Src: 2001:db8::1
    Dst: 2001:db8::100
    Hop Limit: 64, Next Header: TCP (6)</div>
                    <p><strong>What you see in Wireshark:</strong> 128-bit addresses, flow labels, hop limits</p>
                    <small><em>Solves IPv4 address exhaustion with massive address space</em></small>
                </div>
                
                <div class="protocol-card">
                    <h4>üîç ICMP (Internet Control Message Protocol)</h4>
                    <p><strong>Network Diagnostics & Error Reporting</strong></p>
                    <div class="wireshark-example">Internet Control Message Protocol
    Type: 8 (Echo Request)
    Code: 0, Checksum: 0x1234
    Identifier: 0x0001, Sequence: 0x0001
    Data: "Hello World"</div>
                    <p><strong>What you see in Wireshark:</strong> Ping requests/replies, error messages, network unreachable</p>
                    <small><em>Powers ping, traceroute, and network error reporting</em></small>
                </div>
                
                <div class="protocol-card">
                    <h4>üó∫Ô∏è OSPF (Open Shortest Path First)</h4>
                    <p><strong>Dynamic Routing Protocol</strong></p>
                    <div class="wireshark-example">Open Shortest Path First
    Version: 2, Type: Hello Packet
    Router ID: 192.168.1.1
    Area ID: 0.0.0.0
    Neighbors: 192.168.1.2, 192.168.1.3</div>
                    <p><strong>What you see in Wireshark:</strong> Hello packets, LSA updates, topology advertisements</p>
                    <small><em>Routers automatically learn network topology and calculate best paths</em></small>
                </div>
                
                <div class="protocol-card">
                    <h4>üåê BGP (Border Gateway Protocol)</h4>
                    <p><strong>Internet Backbone Routing</strong></p>
                    <div class="wireshark-example">Border Gateway Protocol
    Type: UPDATE, Length: 45
    Path Attributes: AS_PATH, NEXT_HOP
    NLRI: 203.0.113.0/24
    AS Path: 65001 65002 65003</div>
                    <p><strong>What you see in Wireshark:</strong> Route advertisements, AS paths, network prefixes</p>
                    <small><em>How the global internet routes traffic between ISPs</em></small>
                </div>
                
                <div class="protocol-card">
                    <h4>üè† ARP (Address Resolution Protocol)</h4>
                    <p><strong>IP to MAC Address Mapping</strong></p>
                    <div class="wireshark-example">Address Resolution Protocol (request)
    Hardware type: Ethernet
    Protocol type: IPv4
    Who has 192.168.1.1? Tell 192.168.1.100
    Target hardware address: 00:00:00:00:00:00</div>
                    <p><strong>What you see in Wireshark:</strong> ARP requests/replies finding MAC addresses</p>
                    <small><em>Bridges the gap between Layer 2 (MAC) and Layer 3 (IP)</em></small>
                </div>
            </div>
        </div>
        
        <div class="demo-section">
            <h3>üì¶ IPv4 Packet Header Structure</h3>
            <p>Understanding what's inside every IP packet:</p>
            
            <div class="packet-header">
                <div class="header-field">Version<br>4 bits</div>
                <div class="header-field">IHL<br>4 bits</div>
                <div class="header-field">Type of Service<br>8 bits</div>
                <div class="header-field">Total Length<br>16 bits</div>
                <div class="header-field">Identification<br>16 bits</div>
                <div class="header-field">Flags<br>3 bits</div>
                <div class="header-field">Fragment Offset<br>13 bits</div>
                <div class="header-field">TTL<br>8 bits</div>
                <div class="header-field">Protocol<br>8 bits</div>
                <div class="header-field">Header Checksum<br>16 bits</div>
                <div class="header-field">Source IP Address<br>32 bits</div>
                <div class="header-field">Destination IP Address<br>32 bits</div>
            </div>
            
            <div class="wireshark-example">
Real IPv4 Packet in Wireshark:
Internet Protocol Version 4, Src: 192.168.1.100, Dst: 8.8.8.8
    0100 .... = Version: 4
    .... 0101 = Header Length: 20 bytes (5)
    Differentiated Services Field: 0x00
    Total Length: 84
    Identification: 0x1234 (4660)
    Flags: 0x4000, Don't fragment
    Time to live: 64
    Protocol: ICMP (1)
    Header checksum: 0x5678 [validation disabled]
</div>
            
            <h4>Key Header Fields Explained:</h4>
            <ul>
                <li><strong>TTL (Time to Live):</strong> Prevents packets from circling forever - decremented at each router</li>
                <li><strong>Protocol:</strong> Tells what's inside (TCP=6, UDP=17, ICMP=1)</li>
                <li><strong>Source/Dest IP:</strong> Where packet came from and where it's going</li>
                <li><strong>Fragmentation:</strong> Allows large packets to be split across smaller networks</li>
                <li><strong>Checksum:</strong> Detects errors in the header (not the data)</li>
            </ul>
        </div>
        
        <div class="routing-demo">
            <h3>üó∫Ô∏è How Routing Works</h3>
            <p><strong>Scenario:</strong> Packet traveling from your home (192.168.1.100) to Google (8.8.8.8)</p>
            
            <table>
                <tr>
                    <th>Hop</th>
                    <th>Router</th>
                    <th>Network</th>
                    <th>Action</th>
                    <th>TTL</th>
                </tr>
                <tr>
                    <td>1</td>
                    <td>Home Router</td>
                    <td>192.168.1.0/24</td>
                    <td>Forward to ISP</td>
                    <td>64 ‚Üí 63</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>ISP Gateway</td>
                    <td>10.0.0.0/8</td>
                    <td>Route to backbone</td>
                    <td>63 ‚Üí 62</td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>Backbone Router</td>
                    <td>Core Internet</td>
                    <td>BGP path selection</td>
                    <td>62 ‚Üí 61</td>
                </tr>
                <tr>
                    <td>4</td>
                    <td>Google Router</td>
                    <td>8.8.8.0/24</td>
                    <td>Deliver to server</td>
                    <td>61 ‚Üí 60</td>
                </tr>
            </table>
            
            <div class="wireshark-example">
Traceroute showing the path:
1  192.168.1.1      1ms    (home router)
2  10.0.0.1        15ms    (ISP gateway)  
3  203.0.113.1     25ms    (backbone router)
4  8.8.8.8         30ms    (Google DNS)

Each hop shows a router making a forwarding decision!
</div>
        </div>
        
        <div class="subnet-calculator">
            <div style="text-align: center; margin-bottom: 30px;">
                <h3 style="color: #3498db; margin-bottom: 8px;">üî¢ Subnetting Mastery: Complete Guide</h3>
                <p style="color: #bdc3c7; font-size: 1.1em; margin: 0;"><strong>Understanding how networks are divided and organised</strong></p>
            </div>
            
            <div style="background: linear-gradient(135deg, rgba(52, 152, 219, 0.1), rgba(46, 204, 113, 0.1)); padding: 25px; border-radius: 15px; border: 2px solid rgba(52, 152, 219, 0.3); margin-bottom: 30px;">
                <h4 style="color: #3498db; text-align: center; margin-top: 0; margin-bottom: 25px;">üìê IP Address Structure Breakdown</h4>
                
                <!-- Example Header -->
                <div style="background: rgba(241, 196, 15, 0.2); padding: 15px; border-radius: 10px; text-align: center; margin-bottom: 25px; border: 1px solid rgba(241, 196, 15, 0.4);">
                    <h5 style="color: #f1c40f; margin: 0; font-size: 1.3em;">üìù Working Example: 192.168.1.100/24</h5>
                </div>
                
                <!-- Step 1: Show the Components -->
                <div style="margin-bottom: 25px;">
                    <h6 style="color: #2ecc71; margin-bottom: 15px; font-size: 1.1em;">üîç Step 1: Identify the Components</h6>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div style="background: rgba(52, 152, 219, 0.15); padding: 18px; border-radius: 10px; border: 1px solid rgba(52, 152, 219, 0.4);">
                            <div style="text-align: center; margin-bottom: 12px;">
                                <h6 style="color: #3498db; margin: 0;">ÔøΩÔ∏è Host IP Address</h6>
                            </div>
                            <div style="background: rgba(0,0,0,0.4); padding: 12px; border-radius: 6px; text-align: center;">
                                <div style="font-family: monospace; font-size: 1.2em; color: #ecf0f1; margin-bottom: 8px;">192.168.1.100</div>
                                <div style="font-family: monospace; font-size: 0.9em; color: #3498db;">Decimal Notation</div>
                            </div>
                        </div>
                        
                        <div style="background: rgba(46, 204, 113, 0.15); padding: 18px; border-radius: 10px; border: 1px solid rgba(46, 204, 113, 0.4);">
                            <div style="text-align: center; margin-bottom: 12px;">
                                <h6 style="color: #2ecc71; margin: 0;">üéØ Subnet Mask</h6>
                            </div>
                            <div style="background: rgba(0,0,0,0.4); padding: 12px; border-radius: 6px; text-align: center;">
                                <div style="font-family: monospace; font-size: 1.2em; color: #ecf0f1; margin-bottom: 8px;">255.255.255.0</div>
                                <div style="font-family: monospace; font-size: 0.9em; color: #2ecc71;">/24 CIDR Notation</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Step 2: Binary Conversion -->
                <div style="margin-bottom: 25px;">
                    <h6 style="color: #e67e22; margin-bottom: 15px; font-size: 1.1em;">üî¢ Step 2: Convert to Binary</h6>
                    <div style="background: rgba(0,0,0,0.5); padding: 20px; border-radius: 10px; border: 1px solid rgba(255,255,255,0.1);">
                        <div style="margin-bottom: 15px;">
                            <div style="color: #3498db; font-weight: bold; margin-bottom: 8px;">IP Address Binary:</div>
                            <div style="font-family: monospace; font-size: 1.1em; background: rgba(52, 152, 219, 0.1); padding: 10px; border-radius: 5px;">
                                <span style="color: #ecf0f1;">192.168.1.100 =</span><br>
                                <span style="color: #2ecc71;">11000000.10101000.00000001.01100100</span>
                            </div>
                        </div>
                        
                        <div>
                            <div style="color: #2ecc71; font-weight: bold; margin-bottom: 8px;">Subnet Mask Binary:</div>
                            <div style="font-family: monospace; font-size: 1.1em; background: rgba(46, 204, 113, 0.1); padding: 10px; border-radius: 5px;">
                                <span style="color: #ecf0f1;">255.255.255.0 =</span><br>
                                <span style="color: #e74c3c;">11111111.11111111.11111111.</span><span style="color: #f39c12;">00000000</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Step 3: Identify Network vs Host -->
                <div style="margin-bottom: 25px;">
                    <h6 style="color: #9b59b6; margin-bottom: 15px; font-size: 1.1em;">üéØ Step 3: Identify Network vs Host Portions</h6>
                    <div style="background: rgba(0,0,0,0.5); padding: 20px; border-radius: 10px; border: 1px solid rgba(255,255,255,0.1);">
                        <div style="text-align: center; font-family: monospace; font-size: 1em;">
                            <div style="margin-bottom: 8px; color: #95a5a6;">IP Address Binary:</div>
                            <div style="margin-bottom: 15px; font-size: 1.1em;">
                                <span style="color: #e74c3c;">11000000.10101000.00000001.</span><span style="color: #f39c12;">01100100</span>
                            </div>
                            <div style="border-top: 1px solid rgba(255,255,255,0.2); padding-top: 15px;">
                                <div style="margin-bottom: 5px;">
                                    <span style="color: #e74c3c;">‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Network (24 bits) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</span>
                                    <span style="color: #f39c12;">‚îî‚îÄ Host (8 bits) ‚îÄ‚îò</span>
                                </div>
                                <div style="font-size: 0.85em; color: #95a5a6;">
                                    Network identifies the subnet ‚Ä¢ Host identifies individual devices
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Step 4: Calculate Results -->
                <div>
                    <h6 style="color: #e74c3c; margin-bottom: 15px; font-size: 1.1em;">üìä Step 4: Calculate Network Details</h6>
                    <div style="background: rgba(231, 76, 60, 0.1); padding: 18px; border-radius: 10px; border: 1px solid rgba(231, 76, 60, 0.4);">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 12px;">
                            <div style="background: rgba(0,0,0,0.3); padding: 12px; border-radius: 6px; text-align: center;">
                                <div style="color: #3498db; font-weight: bold; margin-bottom: 5px;">Network Address</div>
                                <div style="font-family: monospace; font-size: 1.1em; color: #ecf0f1;">192.168.1.0</div>
                                <div style="font-size: 0.8em; color: #95a5a6;">(All host bits = 0)</div>
                            </div>
                            
                            <div style="background: rgba(0,0,0,0.3); padding: 12px; border-radius: 6px; text-align: center;">
                                <div style="color: #2ecc71; font-weight: bold; margin-bottom: 5px;">Usable Range</div>
                                <div style="font-family: monospace; font-size: 1.1em; color: #ecf0f1;">192.168.1.1 - 192.168.1.254</div>
                                <div style="font-size: 0.8em; color: #95a5a6;">(254 host addresses)</div>
                            </div>
                            
                            <div style="background: rgba(0,0,0,0.3); padding: 12px; border-radius: 6px; text-align: center;">
                                <div style="color: #e74c3c; font-weight: bold; margin-bottom: 5px;">Broadcast Address</div>
                                <div style="font-family: monospace; font-size: 1.1em; color: #ecf0f1;">192.168.1.255</div>
                                <div style="font-size: 0.8em; color: #95a5a6;">(All host bits = 1)</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <h4>üéØ Common Subnet Masks Reference</h4>
            <table>
                <tr>
                    <th>CIDR</th>
                    <th>Subnet Mask</th>
                    <th>Total IPs</th>
                    <th>Usable Hosts</th>
                    <th>Binary Notation</th>
                    <th>Common Use Case</th>
                </tr>
                <tr>
                    <td>/8</td>
                    <td>255.0.0.0</td>
                    <td>16,777,216</td>
                    <td>16,777,214</td>
                    <td>11111111.00000000.00000000.00000000</td>
                    <td>Class A / ISP Networks</td>
                </tr>
                <tr>
                    <td>/16</td>
                    <td>255.255.0.0</td>
                    <td>65,536</td>
                    <td>65,534</td>
                    <td>11111111.11111111.00000000.00000000</td>
                    <td>Class B / Large Organisations</td>
                </tr>
                <tr>
                    <td>/24</td>
                    <td>255.255.255.0</td>
                    <td>256</td>
                    <td>254</td>
                    <td>11111111.11111111.11111111.00000000</td>
                    <td>Class C / Small Office/Home</td>
                </tr>
                <tr>
                    <td>/25</td>
                    <td>255.255.255.128</td>
                    <td>128</td>
                    <td>126</td>
                    <td>11111111.11111111.11111111.10000000</td>
                    <td>Subnet /24 into 2</td>
                </tr>
                <tr>
                    <td>/26</td>
                    <td>255.255.255.192</td>
                    <td>64</td>
                    <td>62</td>
                    <td>11111111.11111111.11111111.11000000</td>
                    <td>Subnet /24 into 4</td>
                </tr>
                <tr>
                    <td>/27</td>
                    <td>255.255.255.224</td>
                    <td>32</td>
                    <td>30</td>
                    <td>11111111.11111111.11111111.11100000</td>
                    <td>Small Department Networks</td>
                </tr>
                <tr>
                    <td>/28</td>
                    <td>255.255.255.240</td>
                    <td>16</td>
                    <td>14</td>
                    <td>11111111.11111111.11111111.11110000</td>
                    <td>Tiny Networks (10-15 devices)</td>
                </tr>
                <tr>
                    <td>/30</td>
                    <td>255.255.255.252</td>
                    <td>4</td>
                    <td>2</td>
                    <td>11111111.11111111.11111111.11111100</td>
                    <td>Point-to-Point Router Links</td>
                </tr>
                <tr>
                    <td>/31</td>
                    <td>255.255.255.254</td>
                    <td>2</td>
                    <td>2</td>
                    <td>11111111.11111111.11111111.11111110</td>
                    <td>RFC 3021 P2P Links (no broadcast)</td>
                </tr>
                <tr>
                    <td>/32</td>
                    <td>255.255.255.255</td>
                    <td>1</td>
                    <td>1</td>
                    <td>11111111.11111111.11111111.11111111</td>
                    <td>Single Host / Loopback</td>
                </tr>
            </table>
            
            <h4>üßÆ Practical Subnetting Example</h4>
            <div style="background: rgba(0, 0, 0, 0.3); padding: 25px; border-radius: 12px; margin: 20px 0; border-left: 4px solid #3498db;">
                <div style="background: rgba(52, 152, 219, 0.1); padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                    <h5 style="margin-top: 0; color: #3498db;">üìã Scenario</h5>
                    <p style="margin-bottom: 0;"><strong>Your company has been assigned 192.168.10.0/24 and needs to create 4 separate subnets for different departments.</strong></p>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                    <div style="background: rgba(46, 204, 113, 0.1); padding: 20px; border-radius: 8px; border-left: 3px solid #2ecc71;">
                        <h5 style="margin-top: 0; color: #2ecc71;">üìê Step 1: Calculate Required Bits</h5>
                        
                        <div style="background: rgba(0,0,0,0.2); padding: 15px; border-radius: 6px; margin-bottom: 15px;">
                            <h6 style="color: #f39c12; margin: 0 0 10px 0;">üéØ The Question:</h6>
                            <p style="margin: 0; font-size: 1.1em;">How many bits do we need to borrow to create <strong>4 subnets</strong>?</p>
                        </div>
                        
                        <div style="background: rgba(255,255,255,0.05); padding: 12px; border-radius: 6px; margin-bottom: 12px;">
                            <h6 style="color: #3498db; margin: 0 0 8px 0;">üßÆ Formula: 2‚Åø = Number of Subnets</h6>
                            <div style="font-family: monospace; font-size: 1.1em;">
                                <div>2¬π = 2 subnets ‚ùå</div>
                                <div style="color: #2ecc71;">2¬≤ = 4 subnets ‚úÖ</div>
                                <div>2¬≥ = 8 subnets (too many)</div>
                            </div>
                        </div>
                        
                        <div style="background: rgba(52, 152, 219, 0.1); padding: 12px; border-radius: 6px;">
                            <h6 style="color: #2ecc71; margin: 0 0 8px 0;">üìä Subnet Mask Changes:</h6>
                            <div style="font-family: monospace;">
                                <div>Original: <span style="color: #e74c3c;">/24</span> (255.255.255.0)</div>
                                <div>Borrow: <span style="color: #f39c12;">2 bits</span> from host portion</div>
                                <div>New mask: <span style="color: #2ecc71;">/26</span> (255.255.255.192)</div>
                            </div>
                        </div>
                    </div>
                    
                    <div style="background: rgba(230, 126, 34, 0.1); padding: 20px; border-radius: 8px; border-left: 3px solid #e67e22;">
                        <h5 style="margin-top: 0; color: #e67e22;">üî¢ Step 2: Calculate Block Size</h5>
                        
                        <div style="background: rgba(0,0,0,0.2); padding: 15px; border-radius: 6px; margin-bottom: 15px;">
                            <h6 style="color: #f39c12; margin: 0 0 10px 0;">üéØ The Question:</h6>
                            <p style="margin: 0; font-size: 1.1em;">How many IP addresses will each subnet contain?</p>
                        </div>
                        
                        <div style="background: rgba(255,255,255,0.05); padding: 12px; border-radius: 6px; margin-bottom: 12px;">
                            <h6 style="color: #3498db; margin: 0 0 8px 0;">üßÆ Formula: 256 - Subnet Octet</h6>
                            <div style="font-family: monospace; font-size: 1.1em;">
                                <div>Subnet mask: 255.255.255.<span style="color: #e67e22;">192</span></div>
                                <div>Calculation: 256 - <span style="color: #e67e22;">192</span> = <span style="color: #2ecc71;">64</span></div>
                                <div style="color: #2ecc71;">Block size = 64 addresses</div>
                            </div>
                        </div>
                        
                        <div style="background: rgba(241, 196, 15, 0.1); padding: 12px; border-radius: 6px;">
                            <h6 style="color: #f1c40f; margin: 0 0 8px 0;">üìã Each Subnet Provides:</h6>
                            <div style="font-size: 0.95em;">
                                <div>üì¶ <span style="color: #3498db;">64 total</span> IP addresses</div>
                                <div>üíª <span style="color: #2ecc71;">62 usable</span> host addresses</div>
                                <div style="font-size: 0.85em; color: #95a5a6;">
                                    (minus 1 network + 1 broadcast)
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <h5 style="color: #f39c12; margin: 25px 0 15px 0;">üéØ Step 3: Subnet Breakdown</h5>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 15px;">
                    <div style="background: rgba(231, 76, 60, 0.1); padding: 12px; border-radius: 6px; border: 1px solid rgba(231, 76, 60, 0.3);">
                        <h6 style="color: #e74c3c; margin: 0 0 8px 0;">üè¢ Sales Department</h6>
                        <div style="font-family: monospace; font-size: 0.9em; line-height: 1.4;">
                            <div><strong>Network:</strong> 192.168.10.0/26</div>
                            <div><strong>Range:</strong> .1 ‚Üí .62</div>
                            <div><strong>Broadcast:</strong> 192.168.10.63</div>
                        </div>
                    </div>
                    
                    <div style="background: rgba(155, 89, 182, 0.1); padding: 12px; border-radius: 6px; border: 1px solid rgba(155, 89, 182, 0.3);">
                        <h6 style="color: #9b59b6; margin: 0 0 8px 0;">‚öôÔ∏è Engineering Department</h6>
                        <div style="font-family: monospace; font-size: 0.9em; line-height: 1.4;">
                            <div><strong>Network:</strong> 192.168.10.64/26</div>
                            <div><strong>Range:</strong> .65 ‚Üí .126</div>
                            <div><strong>Broadcast:</strong> 192.168.10.127</div>
                        </div>
                    </div>
                    
                    <div style="background: rgba(52, 152, 219, 0.1); padding: 12px; border-radius: 6px; border: 1px solid rgba(52, 152, 219, 0.3);">
                        <h6 style="color: #3498db; margin: 0 0 8px 0;">üì¢ Marketing Department</h6>
                        <div style="font-family: monospace; font-size: 0.9em; line-height: 1.4;">
                            <div><strong>Network:</strong> 192.168.10.128/26</div>
                            <div><strong>Range:</strong> .129 ‚Üí .190</div>
                            <div><strong>Broadcast:</strong> 192.168.10.191</div>
                        </div>
                    </div>
                    
                    <div style="background: rgba(46, 204, 113, 0.1); padding: 12px; border-radius: 6px; border: 1px solid rgba(46, 204, 113, 0.3);">
                        <h6 style="color: #2ecc71; margin: 0 0 8px 0;">üìä Administration Department</h6>
                        <div style="font-family: monospace; font-size: 0.9em; line-height: 1.4;">
                            <div><strong>Network:</strong> 192.168.10.192/26</div>
                            <div><strong>Range:</strong> .193 ‚Üí .254</div>
                            <div><strong>Broadcast:</strong> 192.168.10.255</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <h4>üßÆ Visual Subnetting Calculator</h4>
            <div style="background: rgba(0, 0, 0, 0.3); padding: 20px; border-radius: 10px; margin: 20px 0; border: 2px solid rgba(52, 152, 219, 0.3);">
                <div style="text-align: center; margin-bottom: 20px;">
                    <h5 style="color: #3498db; margin-bottom: 5px;">Quick Reference: Common Subnet Divisions</h5>
                    <p style="font-size: 0.9em; color: #bdc3c7; margin: 0;">Choose how many subnets you need from a /24 network</p>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 15px;">
                    <div style="background: rgba(231, 76, 60, 0.1); padding: 15px; border-radius: 8px; text-align: center; border: 1px solid rgba(231, 76, 60, 0.3);">
                        <div style="font-size: 1.5em; margin-bottom: 8px;">üî¥</div>
                        <div style="font-weight: bold; color: #e74c3c;">2 Subnets</div>
                        <div style="font-family: monospace; font-size: 0.85em; margin-top: 8px;">
                            /25 mask ‚Ä¢ 126 hosts each<br>
                            Block size: 128
                        </div>
                    </div>
                    
                    <div style="background: rgba(230, 126, 34, 0.1); padding: 15px; border-radius: 8px; text-align: center; border: 1px solid rgba(230, 126, 34, 0.3);">
                        <div style="font-size: 1.5em; margin-bottom: 8px;">üü†</div>
                        <div style="font-weight: bold; color: #e67e22;">4 Subnets</div>
                        <div style="font-family: monospace; font-size: 0.85em; margin-top: 8px;">
                            /26 mask ‚Ä¢ 62 hosts each<br>
                            Block size: 64
                        </div>
                    </div>
                    
                    <div style="background: rgba(241, 196, 15, 0.1); padding: 15px; border-radius: 8px; text-align: center; border: 1px solid rgba(241, 196, 15, 0.3);">
                        <div style="font-size: 1.5em; margin-bottom: 8px;">üü°</div>
                        <div style="font-weight: bold; color: #f1c40f;">8 Subnets</div>
                        <div style="font-family: monospace; font-size: 0.85em; margin-top: 8px;">
                            /27 mask ‚Ä¢ 30 hosts each<br>
                            Block size: 32
                        </div>
                    </div>
                    
                    <div style="background: rgba(46, 204, 113, 0.1); padding: 15px; border-radius: 8px; text-align: center; border: 1px solid rgba(46, 204, 113, 0.3);">
                        <div style="font-size: 1.5em; margin-bottom: 8px;">üü¢</div>
                        <div style="font-weight: bold; color: #2ecc71;">16 Subnets</div>
                        <div style="font-family: monospace; font-size: 0.85em; margin-top: 8px;">
                            /28 mask ‚Ä¢ 14 hosts each<br>
                            Block size: 16
                        </div>
                    </div>
                </div>
            </div>
            
            <h4>üéì Essential Subnetting Formulas</h4>
            <table style="margin: 20px 0;">
                <tr>
                    <th>Formula</th>
                    <th>Calculation</th>
                    <th>Purpose</th>
                </tr>
                <tr>
                    <td><strong>Number of Subnets</strong></td>
                    <td>2^n (where n = borrowed bits)</td>
                    <td>How many subnets you can create</td>
                </tr>
                <tr>
                    <td><strong>Hosts per Subnet</strong></td>
                    <td>2^h - 2 (where h = host bits)</td>
                    <td>Usable IP addresses per subnet</td>
                </tr>
                <tr>
                    <td><strong>Block Size</strong></td>
                    <td>256 - subnet octet</td>
                    <td>Increment between subnets</td>
                </tr>
                <tr>
                    <td><strong>Network Address</strong></td>
                    <td>All host bits = 0</td>
                    <td>First address (not usable)</td>
                </tr>
                <tr>
                    <td><strong>Broadcast Address</strong></td>
                    <td>All host bits = 1</td>
                    <td>Last address (not usable)</td>
                </tr>
            </table>
            
            <h4>üí° Real-World Subnetting Scenarios</h4>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 25px; margin: 20px 0;">
                <div style="background: rgba(0, 0, 0, 0.3); padding: 20px; border-radius: 12px; border-left: 4px solid #3498db;">
                    <h5 style="color: #3498db; margin-top: 0;">üè¢ Office Building Network</h5>
                    <div style="background: rgba(52, 152, 219, 0.1); padding: 10px; border-radius: 6px; margin-bottom: 15px; text-align: center;">
                        <strong>Base Network: 192.168.0.0/23</strong><br>
                        <small style="color: #bdc3c7;">512 total addresses available</small>
                    </div>
                    
                    <div>
                        <div style="background: rgba(46, 204, 113, 0.1); padding: 8px; border-radius: 4px; margin-bottom: 8px; border-left: 3px solid #2ecc71;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span><strong>üè¢ Floor 1:</strong> Workstations</span>
                                <span style="font-family: monospace; font-size: 0.9em;">192.168.0.0/25</span>
                            </div>
                            <small style="color: #95a5a6;">126 hosts ‚Ä¢ PCs, printers, phones</small>
                        </div>
                        
                        <div style="background: rgba(155, 89, 182, 0.1); padding: 8px; border-radius: 4px; margin-bottom: 8px; border-left: 3px solid #9b59b6;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span><strong>üè¢ Floor 2:</strong> Workstations</span>
                                <span style="font-family: monospace; font-size: 0.9em;">192.168.0.128/25</span>
                            </div>
                            <small style="color: #95a5a6;">126 hosts ‚Ä¢ PCs, printers, phones</small>
                        </div>
                        
                        <div style="background: rgba(241, 196, 15, 0.1); padding: 8px; border-radius: 4px; margin-bottom: 8px; border-left: 3px solid #f1c40f;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span><strong>üè¢ Floor 3:</strong> Management</span>
                                <span style="font-family: monospace; font-size: 0.9em;">192.168.1.0/25</span>
                            </div>
                            <small style="color: #95a5a6;">126 hosts ‚Ä¢ Executive offices</small>
                        </div>
                        
                        <div style="background: rgba(230, 126, 34, 0.1); padding: 8px; border-radius: 4px; margin-bottom: 8px; border-left: 3px solid #e67e22;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span><strong>üñ•Ô∏è Server Room:</strong> Infrastructure</span>
                                <span style="font-family: monospace; font-size: 0.9em;">192.168.1.128/27</span>
                            </div>
                            <small style="color: #95a5a6;">30 hosts ‚Ä¢ File servers, databases</small>
                        </div>
                        
                        <div style="background: rgba(231, 76, 60, 0.1); padding: 8px; border-radius: 4px; margin-bottom: 8px; border-left: 3px solid #e74c3c;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span><strong>üì∂ Guest WiFi:</strong> Visitors</span>
                                <span style="font-family: monospace; font-size: 0.9em;">192.168.1.160/27</span>
                            </div>
                            <small style="color: #95a5a6;">30 hosts ‚Ä¢ Isolated guest access</small>
                        </div>
                    </div>
                </div>
                
                <div style="background: rgba(0, 0, 0, 0.3); padding: 20px; border-radius: 12px; border-left: 4px solid #e67e22;">
                    <h5 style="color: #e67e22; margin-top: 0;">üè≠ Manufacturing Plant Network</h5>
                    <div style="background: rgba(230, 126, 34, 0.1); padding: 10px; border-radius: 6px; margin-bottom: 15px; text-align: center;">
                        <strong>Base Network: 10.20.0.0/16</strong><br>
                        <small style="color: #bdc3c7;">65,536 total addresses available</small>
                    </div>
                    
                    <div>
                        <div style="background: rgba(231, 76, 60, 0.1); padding: 8px; border-radius: 4px; margin-bottom: 8px; border-left: 3px solid #e74c3c;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span><strong>üè≠ Production Floor:</strong> Machinery</span>
                                <span style="font-family: monospace; font-size: 0.9em;">10.20.0.0/20</span>
                            </div>
                            <small style="color: #95a5a6;">4,094 hosts ‚Ä¢ PLCs, HMIs, controllers</small>
                        </div>
                        
                        <div style="background: rgba(155, 89, 182, 0.1); padding: 8px; border-radius: 4px; margin-bottom: 8px; border-left: 3px solid #9b59b6;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span><strong>üì¶ Warehouse:</strong> Logistics</span>
                                <span style="font-family: monospace; font-size: 0.9em;">10.20.16.0/21</span>
                            </div>
                            <small style="color: #95a5a6;">2,046 hosts ‚Ä¢ Scanners, conveyors</small>
                        </div>
                        
                        <div style="background: rgba(46, 204, 113, 0.1); padding: 8px; border-radius: 4px; margin-bottom: 8px; border-left: 3px solid #2ecc71;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span><strong>üë• Office Staff:</strong> Administration</span>
                                <span style="font-family: monospace; font-size: 0.9em;">10.20.24.0/22</span>
                            </div>
                            <small style="color: #95a5a6;">1,022 hosts ‚Ä¢ Computers, printers</small>
                        </div>
                        
                        <div style="background: rgba(52, 152, 219, 0.1); padding: 8px; border-radius: 4px; margin-bottom: 8px; border-left: 3px solid #3498db;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span><strong>üåê IoT Sensors:</strong> Monitoring</span>
                                <span style="font-family: monospace; font-size: 0.9em;">10.20.28.0/22</span>
                            </div>
                            <small style="color: #95a5a6;">1,022 hosts ‚Ä¢ Temperature, pressure</small>
                        </div>
                        
                        <div style="background: rgba(241, 196, 15, 0.1); padding: 8px; border-radius: 4px; margin-bottom: 8px; border-left: 3px solid #f1c40f;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span><strong>‚òéÔ∏è VoIP System:</strong> Communications</span>
                                <span style="font-family: monospace; font-size: 0.9em;">10.20.32.0/23</span>
                            </div>
                            <small style="color: #95a5a6;">510 hosts ‚Ä¢ IP phones, gateways</small>
                        </div>
                    </div>
                </div>
            </div>
            
            <h4>üîç Wireshark Filters for Subnet Analysis</h4>
            <div style="background: rgba(0, 0, 0, 0.4); padding: 20px; border-radius: 10px; border: 1px solid rgba(0, 255, 0, 0.3);">
                <div style="margin-bottom: 15px;">
                    <h5 style="color: #00ff00; margin-bottom: 10px;">üìä Essential Network Filters</h5>
                    <p style="font-size: 0.9em; color: #bdc3c7; margin: 0;">Copy these filters directly into Wireshark to analyse subnet traffic</p>
                </div>
                
                <div style="display: grid; gap: 12px;">
                    <div style="background: rgba(0, 255, 0, 0.05); padding: 12px; border-radius: 6px; border-left: 3px solid #00ff00;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                            <strong style="color: #00ff00;">üì° All Subnet Traffic</strong>
                            <small style="color: #95a5a6;">Most comprehensive</small>
                        </div>
                        <div style="font-family: monospace; background: rgba(0,0,0,0.3); padding: 8px; border-radius: 4px; font-size: 0.9em;">
                            <span style="color: #3498db;">ip.addr == 192.168.1.0/24</span>
                            <span style="color: #95a5a6; margin-left: 10px;"># Shows all traffic in/out of subnet</span>
                        </div>
                    </div>
                    
                    <div style="background: rgba(52, 152, 219, 0.05); padding: 12px; border-radius: 6px; border-left: 3px solid #3498db;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                            <strong style="color: #3498db;">üì§ Outgoing Traffic</strong>
                            <small style="color: #95a5a6;">From subnet</small>
                        </div>
                        <div style="font-family: monospace; background: rgba(0,0,0,0.3); padding: 8px; border-radius: 4px; font-size: 0.9em;">
                            <span style="color: #3498db;">ip.src == 192.168.1.0/24</span>
                            <span style="color: #95a5a6; margin-left: 10px;"># Traffic originating from subnet</span>
                        </div>
                    </div>
                    
                    <div style="background: rgba(46, 204, 113, 0.05); padding: 12px; border-radius: 6px; border-left: 3px solid #2ecc71;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                            <strong style="color: #2ecc71;">üì• Incoming Traffic</strong>
                            <small style="color: #95a5a6;">To subnet</small>
                        </div>
                        <div style="font-family: monospace; background: rgba(0,0,0,0.3); padding: 8px; border-radius: 4px; font-size: 0.9em;">
                            <span style="color: #2ecc71;">ip.dst == 192.168.1.0/24</span>
                            <span style="color: #95a5a6; margin-left: 10px;"># Traffic destined to subnet</span>
                        </div>
                    </div>
                    
                    <div style="background: rgba(241, 196, 15, 0.05); padding: 12px; border-radius: 6px; border-left: 3px solid #f1c40f;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                            <strong style="color: #f1c40f;">üì¢ Broadcast Traffic</strong>
                            <small style="color: #95a5a6;">Network announcements</small>
                        </div>
                        <div style="font-family: monospace; background: rgba(0,0,0,0.3); padding: 8px; border-radius: 4px; font-size: 0.9em;">
                            <span style="color: #f1c40f;">ip.addr == 192.168.1.255</span>
                            <span style="color: #95a5a6; margin-left: 10px;"># Broadcast messages</span>
                        </div>
                    </div>
                    
                    <div style="background: rgba(155, 89, 182, 0.05); padding: 12px; border-radius: 6px; border-left: 3px solid #9b59b6;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                            <strong style="color: #9b59b6;">üö´ External Traffic</strong>
                            <small style="color: #95a5a6;">Outside subnet</small>
                        </div>
                        <div style="font-family: monospace; background: rgba(0,0,0,0.3); padding: 8px; border-radius: 4px; font-size: 0.9em;">
                            <span style="color: #9b59b6;">!(ip.addr == 192.168.1.0/24)</span>
                            <span style="color: #95a5a6; margin-left: 5px;"># Traffic outside subnet</span>
                        </div>
                    </div>
                    
                    <div style="background: rgba(231, 76, 60, 0.05); padding: 12px; border-radius: 6px; border-left: 3px solid #e74c3c;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                            <strong style="color: #e74c3c;">üåê Network Address</strong>
                            <small style="color: #95a5a6;">Routing traffic</small>
                        </div>
                        <div style="font-family: monospace; background: rgba(0,0,0,0.3); padding: 8px; border-radius: 4px; font-size: 0.9em;">
                            <span style="color: #e74c3c;">ip.addr == 192.168.1.0</span>
                            <span style="color: #95a5a6; margin-left: 10px;"># Network/routing traffic</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="example-box">
            <h3>üîç Real-World Example: Accessing a Website</h3>
            <p><strong>Scenario:</strong> You type "www.google.com" in your browser</p>
            
            <h4>What happens at the Network Layer:</h4>
            <ol>
                <li><strong>DNS Resolution:</strong> Browser gets IP address (216.58.194.174) for www.google.com</li>
                <li><strong>Route Lookup:</strong> Your router checks routing table for path to 216.58.194.174</li>
                <li><strong>Packet Creation:</strong> HTTP request wrapped in IP packet with source/dest addresses</li>
                <li><strong>Hop-by-Hop Forwarding:</strong> Each router decrements TTL and forwards toward destination</li>
                <li><strong>Path Determination:</strong> Routers use OSPF/BGP to find best path</li>
                <li><strong>Final Delivery:</strong> Packet reaches Google's network and is delivered</li>
                <li><strong>Return Journey:</strong> Response follows same process in reverse</li>
            </ol>
            
            <div style="background: rgba(0, 0, 0, 0.4); padding: 25px; border-radius: 12px; border: 1px solid rgba(0, 255, 0, 0.3);">
                <h4 style="color: #00ff00; margin-top: 0; text-align: center;">üîç Wireshark Network Layer Analysis</h4>
                <p style="text-align: center; color: #bdc3c7; font-size: 0.9em; margin-bottom: 25px;">
                    Step-by-step packet flow when accessing www.google.com
                </p>
                
                <div style="display: grid; gap: 15px;">
                    <div style="background: rgba(52, 152, 219, 0.1); padding: 15px; border-radius: 8px; border-left: 4px solid #3498db;">
                        <div style="display: flex; align-items: center; margin-bottom: 8px;">
                            <span style="background: #3498db; color: white; border-radius: 50%; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; font-weight: bold; margin-right: 10px;">1</span>
                            <strong style="color: #3498db;">DNS Query Request</strong>
                        </div>
                        <div style="font-family: monospace; background: rgba(0,0,0,0.3); padding: 10px; border-radius: 4px; font-size: 0.9em;">
                            <div style="color: #00ff00;">DNS Query: A record for www.google.com</div>
                            <div style="color: #95a5a6;">Source: 192.168.1.100:53741</div>
                            <div style="color: #95a5a6;">Destination: 8.8.8.8:53</div>
                        </div>
                    </div>
                    
                    <div style="background: rgba(46, 204, 113, 0.1); padding: 15px; border-radius: 8px; border-left: 4px solid #2ecc71;">
                        <div style="display: flex; align-items: center; margin-bottom: 8px;">
                            <span style="background: #2ecc71; color: white; border-radius: 50%; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; font-weight: bold; margin-right: 10px;">2</span>
                            <strong style="color: #2ecc71;">DNS Response Received</strong>
                        </div>
                        <div style="font-family: monospace; background: rgba(0,0,0,0.3); padding: 10px; border-radius: 4px; font-size: 0.9em;">
                            <div style="color: #00ff00;">DNS Response: 216.58.194.174</div>
                            <div style="color: #95a5a6;">Type: A Record</div>
                            <div style="color: #95a5a6;">TTL: 300 seconds</div>
                        </div>
                    </div>
                    
                    <div style="background: rgba(155, 89, 182, 0.1); padding: 15px; border-radius: 8px; border-left: 4px solid #9b59b6;">
                        <div style="display: flex; align-items: center; margin-bottom: 8px;">
                            <span style="background: #9b59b6; color: white; border-radius: 50%; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; font-weight: bold; margin-right: 10px;">3</span>
                            <strong style="color: #9b59b6;">IP Packet Creation</strong>
                        </div>
                        <div style="font-family: monospace; background: rgba(0,0,0,0.3); padding: 10px; border-radius: 4px; font-size: 0.9em;">
                            <div style="color: #00ff00;">IP Packet: 192.168.1.100 ‚Üí 216.58.194.174</div>
                            <div style="color: #f39c12;">Protocol: TCP (Port 80/443)</div>
                            <div style="color: #e74c3c;">TTL: 64 hops</div>
                            <div style="color: #95a5a6;">Packet Size: 1500 bytes (MTU)</div>
                        </div>
                    </div>
                    
                    <div style="background: rgba(241, 196, 15, 0.1); padding: 15px; border-radius: 8px; border-left: 4px solid #f1c40f;">
                        <div style="display: flex; align-items: center; margin-bottom: 8px;">
                            <span style="background: #f1c40f; color: white; border-radius: 50%; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; font-weight: bold; margin-right: 10px;">4</span>
                            <strong style="color: #f1c40f;">ARP Resolution</strong>
                        </div>
                        <div style="font-family: monospace; background: rgba(0,0,0,0.3); padding: 10px; border-radius: 4px; font-size: 0.9em;">
                            <div style="color: #00ff00;">ARP: Resolve next hop MAC address</div>
                            <div style="color: #3498db;">Who has 192.168.1.1? Tell 192.168.1.100</div>
                            <div style="color: #95a5a6;">Reply: 192.168.1.1 is at aa:bb:cc:dd:ee:ff</div>
                        </div>
                    </div>
                    
                    <div style="background: rgba(230, 126, 34, 0.1); padding: 15px; border-radius: 8px; border-left: 4px solid #e67e22;">
                        <div style="display: flex; align-items: center; margin-bottom: 8px;">
                            <span style="background: #e67e22; color: white; border-radius: 50%; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; font-weight: bold; margin-right: 10px;">5</span>
                            <strong style="color: #e67e22;">HTTP Data Transmission</strong>
                        </div>
                        <div style="font-family: monospace; background: rgba(0,0,0,0.3); padding: 10px; border-radius: 4px; font-size: 0.9em;">
                            <div style="color: #00ff00;">Multiple IP packets carrying HTTP data</div>
                            <div style="color: #3498db;">Packet 1: [SYN] TCP handshake</div>
                            <div style="color: #2ecc71;">Packet 2-5: HTTP GET request fragments</div>
                            <div style="color: #95a5a6;">IPv4 fragments reassembled at destination</div>
                        </div>
                    </div>
                    
                    <div style="background: rgba(231, 76, 60, 0.1); padding: 15px; border-radius: 8px; border-left: 4px solid #e74c3c;">
                        <div style="display: flex; align-items: center; margin-bottom: 8px;">
                            <span style="background: #e74c3c; color: white; border-radius: 50%; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; font-weight: bold; margin-right: 10px;">‚ö†</span>
                            <strong style="color: #e74c3c;">Error Handling (If Required)</strong>
                        </div>
                        <div style="font-family: monospace; background: rgba(0,0,0,0.3); padding: 10px; border-radius: 4px; font-size: 0.9em;">
                            <div style="color: #e74c3c;">ICMP if route fails: "Network unreachable"</div>
                            <div style="color: #f39c12;">Destination Host Unreachable</div>
                            <div style="color: #95a5a6;">Router sends error back to source</div>
                        </div>
                    </div>
                </div>
                
                <div style="background: rgba(52, 152, 219, 0.1); padding: 15px; border-radius: 8px; margin-top: 20px; text-align: center;">
                    <strong style="color: #3498db;">üéØ Key Network Layer Functions Demonstrated:</strong>
                    <div style="margin-top: 10px; display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; font-size: 0.9em;">
                        <div>‚úÖ Logical Addressing (IP)</div>
                        <div>‚úÖ Routing & Path Selection</div>
                        <div>‚úÖ Packet Fragmentation</div>
                        <div>‚úÖ Error Detection (ICMP)</div>
                    </div>
                </div>
            </div>
            <p><em>The Network Layer makes global internet communication possible by providing logical addressing and routing.</em></p>
        </div>
        
        <div class="content-grid">
            <div class="content-box">
                <h3>üêõ Common Network Layer Problems</h3>
                <ul>
                    <li><strong>Routing Loops:</strong> Packets circling between routers infinitely</li>
                    <li><strong>IP Address Conflicts:</strong> Multiple devices using same IP</li>
                    <li><strong>Subnet Misconfigurations:</strong> Wrong subnet masks preventing communication</li>
                    <li><strong>Routing Table Errors:</strong> Missing or incorrect routes</li>
                    <li><strong>MTU Problems:</strong> Packets too large for network segments</li>
                    <li><strong>TTL Expiration:</strong> Packets dying before reaching destination</li>
                </ul>
            </div>
            
            <div class="content-box">
                <h3>üîß Troubleshooting Tools</h3>
                <ul>
                    <li><strong>Ping:</strong> Test basic connectivity and packet loss</li>
                    <li><strong>Traceroute:</strong> Show path packets take to destination</li>
                    <li><strong>Routing Tables:</strong> View and modify router forwarding tables</li>
                    <li><strong>IP Config:</strong> Display and configure IP settings</li>
                    <li><strong>Wireshark:</strong> analyse IP packet headers and routing</li>
                    <li><strong>Network Calculators:</strong> Subnet planning and IP management</li>
                </ul>
            </div>
        </div>
        
        <div class="example-box">
            <h3>üéì Teaching Analogy: Postal System</h3>
            <p><strong>Think of the Network Layer like the postal system:</strong></p>
            <ul>
                <li><strong>Addresses (IP):</strong> Full mailing addresses that work globally</li>
                <li><strong>Postal Codes (Subnets):</strong> Group addresses by geographic regions</li>
                <li><strong>Sorting Facilities (Routers):</strong> Decide which direction mail should go</li>
                <li><strong>Postal Routes (Routing Tables):</strong> Maps showing best paths to destinations</li>
                <li><strong>Postal Trucks (Packets):</strong> Carry mail between sorting facilities</li>
                <li><strong>Return to Sender (ICMP):</strong> Error messages when delivery fails</li>
            </ul>
            <p><em>Just like the postal system routes mail across the world, Layer 3 routes packets across the internet!</em></p>
        </div>
        
        <div class="content-box">
            <h3>üìö Key Learning Points</h3>
            <ul>
                <li>Network Layer provides <span class="highlight">logical addressing</span> that works across different networks</li>
                <li><span class="highlight">Routers</span> operate at Layer 3, making forwarding decisions based on IP addresses</li>
                <li><span class="highlight">Routing protocols</span> (OSPF, BGP) automatically learn and share network topology</li>
                <li><span class="highlight">Subnetting</span> allows efficient use of IP address space</li>
                <li><span class="highlight">TTL/Hop Limit</span> prevents packets from looping forever</li>
                <li>Layer 3 makes <span class="highlight">internet-scale communication</span> possible</li>
            </ul>
        </div>
        
        <div style="text-align: center; margin-top: 40px;">
            <a href="index.html" class="back-button">‚Üê Return to OSI Overview</a>
        </div>
    </div>

    <script>
        let demoRunning = false;
        let currentPhase = 0;
        let currentStepIndex = 0;
        let currentProtocolSteps = [];
        let manualMode = false;
        
        const protocols = {
            ipv4: {
                name: "IPv4 Routing - Basic Packet Forwarding",
                description: "IPv4 provides logical addressing and routing for packets across multiple networks using 32-bit IP addresses.",
                phases: [
                    {
                        text: "Host creates IPv4 packet with source and destination IP addresses",
                        wireshark: "IPv4: Src: 192.168.1.100 Dst: 8.8.8.8 TTL: 64 Protocol: TCP",
                        explanation: "Computer creates packet with its IP and Google's IP address (like addressing an envelope)"
                    },
                    {
                        text: "Router checks routing table for best path to destination network",
                        wireshark: "Routing Table: 8.8.8.0/24 via 203.0.113.1 metric 10",
                        explanation: "Router looks up 'How do I reach 8.8.8.8?' and finds the next hop router"
                    },
                    {
                        text: "Router decrements TTL and forwards packet to next hop",
                        wireshark: "IPv4: TTL: 64 ‚Üí 63, forwarded via interface eth0",
                        explanation: "Packet gets one step closer to death (TTL--) and moves to next router"
                    },
                    {
                        text: "Process repeats until packet reaches destination network",
                        wireshark: "IPv4: Arrived at 8.8.8.8, TTL: 60, delivered to host",
                        explanation: "After several hops through routers, packet finally reaches Google's server"
                    }
                ],
                layer3_evidence: [
                    "Uses 32-bit IP addresses for logical addressing across networks",
                    "Routers make forwarding decisions based on destination IP addresses",
                    "TTL prevents packets from looping infinitely through the network",
                    "Operates independently of underlying Layer 2 technologies",
                    "Enables communication between different physical network types"
                ]
            },
            icmp: {
                name: "ICMP (Internet Control Message Protocol) - Network Diagnostics",
                description: "ICMP provides error reporting and network diagnostic functions like ping and traceroute.",
                phases: [
                    {
                        text: "Host sends ICMP Echo Request to test connectivity",
                        wireshark: "ICMP Echo Request: Type=8 Code=0 ID=0x1234 Seq=1",
                        explanation: "Computer sends 'ping' message asking 'Are you there?' to destination"
                    },
                    {
                        text: "Packet travels through routers using normal IP routing",
                        wireshark: "IPv4: Src=192.168.1.100 Dst=8.8.8.8 Protocol=ICMP TTL=64",
                        explanation: "ICMP message travels inside IP packet just like any other data"
                    },
                    {
                        text: "Destination host processes ICMP request",
                        wireshark: "ICMP processing: Echo Request received, generating response",
                        explanation: "Destination says 'Yes, I'm here!' and prepares to send reply"
                    },
                    {
                        text: "ICMP Echo Reply sent back to source host",
                        wireshark: "ICMP Echo Reply: Type=0 Code=0 ID=0x1234 Seq=1 Time=25ms",
                        explanation: "Reply travels back showing the destination is reachable and response time"
                    }
                ],
                layer3_evidence: [
                    "Operates at Layer 3 alongside IP for network control functions",
                    "Provides error reporting when IP routing fails",
                    "Used by diagnostic tools like ping and traceroute",
                    "Helps routers communicate network problems to hosts",
                    "Essential for network troubleshooting and monitoring"
                ]
            },
            ospf: {
                name: "OSPF (Open Shortest Path First) - Dynamic Routing",
                description: "OSPF is a dynamic routing protocol that automatically learns network topology and calculates best paths.",
                phases: [
                    {
                        text: "OSPF routers exchange Hello packets to discover neighbors",
                        wireshark: "OSPF Hello: Router ID=1.1.1.1 Area=0.0.0.0 Neighbors: 2.2.2.2",
                        explanation: "Routers introduce themselves: 'Hi, I'm Router 1.1.1.1, who are my neighbors?'"
                    },
                    {
                        text: "Routers exchange Link State Advertisements (LSAs)",
                        wireshark: "OSPF LSA: Router 1.1.1.1 connected to 192.168.1.0/24 cost=10",
                        explanation: "Each router shares what networks it knows: 'I can reach 192.168.1.0/24'"
                    },
                    {
                        text: "Each router builds complete network topology database",
                        wireshark: "OSPF Database: 5 routers, 8 networks, SPF calculation triggered",
                        explanation: "Every router learns the complete network map and calculates best paths"
                    },
                    {
                        text: "Shortest Path First algorithm creates routing table",
                        wireshark: "Routing Table: 8.8.8.0/24 via 203.0.113.1 cost=50 (OSPF)",
                        explanation: "Router installs best routes: 'To reach 8.8.8.0/24, send via 203.0.113.1'"
                    }
                ],
                layer3_evidence: [
                    "Exchanges Layer 3 routing information between routers",
                    "Builds routing tables for IP packet forwarding decisions",
                    "Calculates paths based on network topology and costs",
                    "Automatically adapts to network changes and failures",
                    "Operates independently of Layer 2 switching protocols"
                ]
            },
            bgp: {
                name: "BGP (Border Gateway Protocol) - Internet Backbone Routing",
                description: "BGP is the routing protocol that connects different autonomous systems across the global internet.",
                phases: [
                    {
                        text: "BGP peers establish TCP connection for routing exchange",
                        wireshark: "BGP Open: AS 65001 Router ID 203.0.113.1 Hold Time 180",
                        explanation: "ISPs establish secure connections to exchange routing information"
                    },
                    {
                        text: "Autonomous Systems advertise their network prefixes",
                        wireshark: "BGP Update: NLRI 8.8.8.0/24 AS_Path: 65001 65002 15169",
                        explanation: "Google (AS 15169) advertises: 'I own 8.8.8.0/24, path is through AS 65002, 65001'"
                    },
                    {
                        text: "BGP selects best paths using policy and path attributes",
                        wireshark: "BGP Decision: 8.8.8.0/24 best path via 203.0.113.1 (shortest AS path)",
                        explanation: "Routers choose best internet routes based on business relationships and path length"
                    },
                    {
                        text: "Global routing tables updated with internet-wide reachability",
                        wireshark: "BGP Table: 800,000+ routes, 8.8.8.0/24 via AS 65001",
                        explanation: "Your packets now know how to reach Google anywhere on the internet"
                    }
                ],
                layer3_evidence: [
                    "Exchanges IP routing information between different autonomous systems",
                    "Creates global routing tables for internet-wide connectivity",
                    "Makes policy decisions about IP packet paths",
                    "Operates on IP address prefixes and network reachability",
                    "Enables the global internet routing infrastructure"
                ]
            }
        };
        
        function startDemo() {
            if (demoRunning) return;
            
            const selectedProtocol = document.getElementById('protocolSelect').value;
            currentProtocolSteps = protocols[selectedProtocol].phases;
            currentStepIndex = 0;
            currentPhase = 0;
            demoRunning = true;
            manualMode = false;
            
            document.getElementById('startDemo').disabled = true;
            document.getElementById('manualDemo').disabled = true;
            
            runAutomaticDemo();
        }
        
        function startManualDemo() {
            if (demoRunning) return;
            
            const selectedProtocol = document.getElementById('protocolSelect').value;
            currentProtocolSteps = protocols[selectedProtocol].phases;
            currentStepIndex = 0;
            currentPhase = 0;
            demoRunning = true;
            manualMode = true;
            
            document.getElementById('startDemo').disabled = true;
            document.getElementById('manualDemo').disabled = true;
            document.getElementById('nextStepBtn').disabled = false;
            document.getElementById('prevStepBtn').disabled = true;
            
            updateDisplay();
        }
        
        function runAutomaticDemo() {
            if (currentStepIndex >= currentProtocolSteps.length) {
                resetDemo();
                return;
            }
            
            updateDisplay();
            animatePacket();
            
            setTimeout(() => {
                currentStepIndex++;
                currentPhase = (currentPhase + 1) % 3;
                if (demoRunning) {
                    runAutomaticDemo();
                }
            }, 3000);
        }
        
        function nextStep() {
            if (currentStepIndex >= currentProtocolSteps.length - 1) return;
            
            currentStepIndex++;
            currentPhase = (currentPhase + 1) % 3;
            updateDisplay();
            animatePacket();
            
            document.getElementById('prevStepBtn').disabled = false;
            if (currentStepIndex >= currentProtocolSteps.length - 1) {
                document.getElementById('nextStepBtn').disabled = true;
            }
        }
        
        function prevStep() {
            if (currentStepIndex <= 0) return;
            
            currentStepIndex--;
            currentPhase = (currentPhase - 1 + 3) % 3;
            updateDisplay();
            
            document.getElementById('nextStepBtn').disabled = false;
            if (currentStepIndex <= 0) {
                document.getElementById('prevStepBtn').disabled = true;
            }
        }
        
        function updateDisplay() {
            if (currentStepIndex >= currentProtocolSteps.length) {
                resetDemo();
                return;
            }
            
            const currentStep = currentProtocolSteps[currentStepIndex];
            
            // Update phase indicator
            document.querySelectorAll('.phase').forEach((phase, index) => {
                phase.classList.toggle('active', index === currentPhase);
            });
            
            // Update status text
            document.getElementById('statusText').textContent = currentStep.text;
            document.getElementById('stepCounter').textContent = `Step ${currentStepIndex + 1} of ${currentProtocolSteps.length}`;
            
            // Update Wireshark example
            const wiresharkDiv = document.getElementById('wiresharkExample');
            const explanationDiv = document.getElementById('packetExplanation');
            
            wiresharkDiv.textContent = currentStep.wireshark;
            wiresharkDiv.style.display = 'block';
            
            explanationDiv.textContent = currentStep.explanation;
            explanationDiv.style.display = 'block';
            
            // Update overall status
            const statusClass = ['routing', 'forwarding', 'forwarding'][currentPhase];
            const statusText = ['Route Lookup', 'Packet Forwarding', 'Packet Delivery'][currentPhase];
            
            document.getElementById('overallStatus').className = `status ${statusClass}`;
            document.getElementById('overallStatus').textContent = statusText;
            
            // Update device status
            document.getElementById('sourceStatus').textContent = 
                currentPhase === 0 ? 'Looking up route...' : currentPhase === 1 ? 'Sending...' : 'Complete';
            document.getElementById('destStatus').textContent = 
                currentPhase >= 2 ? 'Receiving...' : 'Waiting';
        }
        
        function animatePacket() {
            const packet1 = document.getElementById('packet1');
            const packet2 = document.getElementById('packet2');
            
            // Reset positions
            packet1.classList.remove('moving');
            packet2.classList.remove('moving');
            
            // Trigger animation
            setTimeout(() => {
                packet1.classList.add('moving');
            }, 100);
            
            setTimeout(() => {
                packet2.classList.add('moving');
            }, 600);
        }
        
        function resetDemo() {
            demoRunning = false;
            currentStepIndex = 0;
            currentPhase = 0;
            manualMode = false;
            
            document.getElementById('startDemo').disabled = false;
            document.getElementById('manualDemo').disabled = false;
            document.getElementById('nextStepBtn').disabled = true;
            document.getElementById('prevStepBtn').disabled = true;
            
            // Reset display
            document.querySelectorAll('.phase').forEach(phase => {
                phase.classList.remove('active');
            });
            
            document.getElementById('statusText').textContent = 'Select a protocol and mode to begin';
            document.getElementById('stepCounter').textContent = 'Step 0 of 0';
            document.getElementById('wiresharkExample').style.display = 'none';
            document.getElementById('packetExplanation').style.display = 'none';
            
            document.getElementById('overallStatus').className = 'status idle';
            document.getElementById('overallStatus').textContent = 'Network Idle';
            
            document.getElementById('sourceStatus').textContent = 'Ready';
            document.getElementById('destStatus').textContent = 'Listening';
            
            // Reset packet animations
            const packet1 = document.getElementById('packet1');
            const packet2 = document.getElementById('packet2');
            packet1.classList.remove('moving');
            packet2.classList.remove('moving');
        }
        
        function showDetails() {
            const selectedProtocol = document.getElementById('protocolSelect').value;
            const protocol = protocols[selectedProtocol];
            
            document.getElementById('protocolDescription').innerHTML = `
                <h4>${protocol.name}</h4>
                <p>${protocol.description}</p>
            `;
            
            const evidenceHtml = protocol.layer3_evidence
                .map(evidence => `<li>${evidence}</li>`)
                .join('');
            
            document.getElementById('layer3Evidence').innerHTML = `
                <h4>Why This is Layer 3 (Network Layer):</h4>
                <ul>${evidenceHtml}</ul>
            `;
        }
        
        // Initialise
        showDetails();
        
        // Dark Mode Functions
        function toggleDarkMode(){document.body.classList.toggle('dark-mode');const isDark=document.body.classList.contains('dark-mode');localStorage.setItem('darkMode',isDark);updateDarkModeButton(isDark);}
        function updateDarkModeButton(isDark){const icon=document.getElementById('darkModeIcon');const text=document.getElementById('darkModeText');if(isDark){icon.textContent='‚òÄÔ∏è';text.textContent='Light Mode';}else{icon.textContent='üåô';text.textContent='Dark Mode';}}
        window.addEventListener('DOMContentLoaded',function(){const savedDarkMode=localStorage.getItem('darkMode')==='true';if(savedDarkMode){document.body.classList.add('dark-mode');updateDarkModeButton(true);}});
    </script>
    
    <footer style="background: rgba(0, 0, 0, 0.3); padding: 20px; margin-top: 40px; border-top: 2px solid rgba(255, 255, 255, 0.1); text-align: center; border-radius: 10px;">
        <p style="margin: 0; font-size: 0.9em; line-height: 1.6;">
            Created by Alex for educational purposes ONLY. Please contact me at <a href="mailto:alex@slash-root.com" style="color: #3498db; text-decoration: none;">alex@slash-root.com</a> should you spot any errors or wish to query anything.
        </p>
    </footer>
</body>
</html>
